/*! HelpSmith Web Help System 3.0
* http://www.helpsmith.com
* Copyright (c) 2007-2017 Divcom Software */
(function(e){function d(a,b){var c=this;c.$container=a;c.activeNode=null;c.allowFx=!0;c.options=e.extend({expandSpeed:100,expandOnDblClick:!0,autoCollapse:!1,noButtons:!1,onNodeRender:null,onQueryExpand:null,onActivate:null,onDeactivate:null,onClick:null,onExpand:null},b);c.$container.addClass("hstree-container");c.$root=c.$container.find("> ul").addClass("hstree-root");a.find("li").each(function(){var a=e(this);a.addClass("hstree-node");a.is(":last-child")&&a.addClass("hstree-last");var b=a.find("> ul").detach(),
d=a.find("> a").detach();b.length&&a.addClass("hstree-has-children");var k=a.attr("title");a.removeAttr("title");var f;d.length?f=d:(d=a.contents().detach(),f=e('<a href="#"></a>').append(d));k?f.attr("title",k):f.removeAttr("title");a.data("title",f.text());var g=null;c.options.noButtons||(g=e('<div class="hstree-node-btn"></div>'),g.append("<i></i>"));k=e('<div class="hstree-node-icon"></div>');k.append("<i></i>");var l=e('<div class="hstree-node-title"></div>');l.append(f);d=e('<div class="hstree-node-cnt-w"></div>');
d.append(k,l);l=e('<div class="hstree-node-cnt"></div>');l.append(d);g&&a.append(g);a.append(l,b);f.on("click",function(b){b.preventDefault();$this=e(this);if("function"===typeof c.options.onClick)c.options.onClick(a);c.setActiveNode(a)}).on("keydown",function(a){function b(a){a.find("> .hstree-node-cnt a").focus()}$this=e(this);var d=$this.closest(".hstree-node");if(d.length)switch(a.which){case 32:a.preventDefault();c.setActiveNode(d);break;case 38:a.preventDefault();(d=c.getPrevNode(d,!0))&&b(d);
break;case 40:a.preventDefault();(d=c.getNextNode(d,!0))&&b(d);break;case 37:a.preventDefault();d.find("> ul:visible").length?c.expandNode(d,!1):(d=c.getParent(d))&&b(d);break;case 39:a.preventDefault(),(a=c.getFirstChild(d,!0))?b(a):c.expandNode(d)}});if(c.options.expandOnDblClick)f.on("dblclick",function(b){b.preventDefault();$this=e(this);c.toggleNode(a)});k.on("click",function(d){d.preventDefault();!g&&b.length?c.toggleNode(a):(f.get(0).click(),f.focus())});if(b.length&&(a.addClass("hstree-collapsed"),
g))g.on("click",function(){c.toggleNode(a);f.focus()});if("function"===typeof c.options.onNodeRender)c.options.onNodeRender(a)})}function m(a,b,c,d){if(!b||a.isNodeValid(b))if(b?(a=b.find("> ul"),b=1==a.length&&a.is(":visible")):(a=a.$root,b=!0),1==a.length&&("undefined"==d||!d||b)&&(c=a.find("> .hstree-node:"+c+"-child"),1==c.length))return c;return null}function n(a,b){if("function"===typeof a.options.onActivate)a.options.onActivate(b)}d.prototype.getFirstChild=function(a,b){return m(this,a,"first",
b)};d.prototype.getLastChild=function(a,b){return m(this,a,"last",b)};d.prototype.getNextSibling=function(a){return this.isNodeValid(a)&&(a=a.next(),1==a.length)?a:null};d.prototype.getPrevSibling=function(a){return this.isNodeValid(a)&&(a=a.prev(),1==a.length)?a:null};d.prototype.getParent=function(a){return this.isNodeValid(a)&&(a=a.parent("ul:not(.hstree-root)").parent(".hstree-node"),a.length)?a:null};d.prototype.getNextNode=function(a,b){var c=this.getFirstChild(a,b);if(c)return c;if(!a)return null;
for(;;){if(c=this.getNextSibling(a))return c;if(c=this.getParent(a))a=c;else return null}};d.prototype.getPrevNode=function(a,b){var c=this.getPrevSibling(a);if(c){var d=this.getLastChild(c,b);return d?d:c}return(c=this.getParent(a))&&!c.is(this.$root)?c:null};d.prototype.isNodeValid=function(a){return a&&1==a.length&&a.hasClass("hstree-node")};d.prototype.expandNode=function(a,b){if(!this.isNodeValid(a))return!1;var c=a.find("> ul");if(!c.length)return!1;"undefined"===typeof b&&(b=!0);if("function"===
typeof this.options.onQueryExpand&&!1===this.options.onQueryExpand(a,b))return!1;var d=this.allowFx&&0<this.options.expandSpeed,e=c.is(":visible");b?e||(a.removeClass("hstree-collapsed").addClass("hstree-expanded"),d?c.slideDown(this.options.expandSpeed):c.show(),this.collapseOther(a)):e&&(a.removeClass("hstree-expanded").addClass("hstree-collapsed"),d?c.slideUp(this.options.expandSpeed):c.hide())};d.prototype.toggleNode=function(a){var b=a.find("> ul");return b.length?this.expandNode(a,!b.is(":visible")):
!1};d.prototype.getActiveNode=function(){return this.activeNode};d.prototype.setActiveNode=function(a,b){if(!a||this.isNodeValid(a)){if(!this.activeNode&&!a||this.activeNode&&a&&this.activeNode.is(a))return!0;if(this.activeNode){var c=this.activeNode;this.activeNode.removeClass("hstree-active");this.activeNode=null;if("function"===typeof this.options.onDeactivate)this.options.onDeactivate(c)}return a?this.isNodeValid(a)?(this.activeNode=a,a.addClass("hstree-active"),"undefined"!==typeof b&&b||n(this,
a),!0):!1:!0}};d.prototype.reActivateNode=function(){return this.activeNode?(n(this,this.activeNode),!0):!1};d.prototype.collapseOther=function(a){if(this.options.autoCollapse&&this.isNodeValid(a)){var b=this;a.siblings().each(function(){b.expandNode(e(this),!1)})}};d.prototype.getNodeByData=function(a,b){return this.$root.find(".hstree-node[data-"+a+'="'+b+'"]').first()};d.prototype.viewNode=function(a){var b=this;if(b.isNodeValid(a)){var c=b.allowFx;try{b.allowFx=!1,a.parents(".hstree-node").each(function(){b.expandNode(e(this))})}finally{b.allowFx=
c}return!0}return!1};d.prototype.getChildren=function(a){var b={children:[],list:null};"undefined"!==typeof a&&a?this.isNodeValid(a)&&(b.list=a.find("> ul")):b.list=this.$root;b.list&&b.list.length&&b.list.find("> li.hstree-node").each(function(){b.children.push(this)});return b};d.prototype.sortChildren=function(a,b){var c=this.getChildren(b);if(c.children.length){e(c.children[c.children.length-1]).removeClass("hstree-last");for(var d=[],h=0;h<c.children.length;h++)d.push(e(c.children[h]).detach());
d.sort(a);c.list.append(d);c.list.find("> li:last-child").addClass("hstree-last")}};var h={init:function(a){return this.each(function(){$this=e(this);!$this.data("hsTree")&&$this.find("> ul").length&&$this.data("hsTree",new d($this,a))})},getActiveNode:function(){var a=this.first().data("hsTree");return a?a.getActiveNode():null},setActiveNode:function(a,b){var c=this.first().data("hsTree");if(c){var d=c.setActiveNode(a,b);a&&d&&c.viewNode(a);return d}return!1},reActivateNode:function(){var a=this.first().data("hsTree");
a&&a.reActivateNode()},getNodeByData:function(a,b){var c=this.first().data("hsTree");return c?c.getNodeByData(a,b):null},expandNode:function(a,b){var c=this.first().data("hsTree");return c?c.expandNode(a,b):null},getChildren:function(a){var b=this.first().data("hsTree");return b?b.getChildren(a).children:[]},sortChildren:function(a,b){var c=this.first().data("hsTree");c&&c.sortChildren(a,b)}};e.fn.hsTree=function(a){if(h[a])return h[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==
typeof a&&a)e.error("Method "+a+" does not exist on jQuery.hsTree");else return h.init.apply(this,arguments)}})(jQuery);